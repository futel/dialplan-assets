---
- hosts: localhost
  tasks:
  - name: load conf
    include_vars: "conf.yml"
  - name: clean assets directory
    file:
      path: "{{ asset_dest_directory }}"
      state: absent
  - name: clean assets directory
    file:
      path: "{{ asset_dest_directory }}"
      state: directory
  - name: clean temp directory
    file:
      path: tmp
      state: absent
  - name: clean temp directory
    file:
      path: tmp
      state: directory
  - name: flatten directory tree
    command: python3 scripts/copy_assets.py {{ asset_src_directory }} tmp
  - name: update and copy sounds
    command: ruby scripts/update_audio_assets.rb tmp {{ asset_dest_directory }}
# XXX should remove assets not in assets_src